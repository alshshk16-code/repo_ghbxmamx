# Contributing to Gateway-Ripper

Thank you for your interest in contributing to Gateway-Ripper! This document provides guidelines and instructions for contributing.

## Table of Contents

1. [Code of Conduct](#code-of-conduct)
2. [How to Contribute](#how-to-contribute)
3. [Development Setup](#development-setup)
4. [Adding New Gateways](#adding-new-gateways)
5. [Coding Standards](#coding-standards)
6. [Testing](#testing)
7. [Pull Request Process](#pull-request-process)

---

## Code of Conduct

### Our Standards

- Be respectful and inclusive
- Accept constructive criticism
- Focus on what's best for the community
- Show empathy towards others

### Unacceptable Behavior

- Harassment or discriminatory language
- Trolling or insulting comments
- Publishing others' private information
- Any illegal activities

---

## How to Contribute

### Reporting Bugs

Before creating bug reports, please check existing issues. When creating a bug report, include:

- **Clear title and description**
- **Steps to reproduce**
- **Expected vs actual behavior**
- **Environment details** (OS, Python version, etc.)
- **Error messages or logs**

Example:
```markdown
**Bug**: Stripe key extraction fails on minified JavaScript

**Steps to Reproduce:**
1. Run `python ripper.py --url https://example.com`
2. Observe error message

**Expected:** Should extract key from minified JS
**Actual:** Returns "No API keys found"

**Environment:**
- OS: Ubuntu 22.04
- Python: 3.9.7
- Gateway-Ripper: v1.0.0

**Error Log:**
[Paste error here]
```

### Suggesting Enhancements

Enhancement suggestions are welcome! Include:

- **Clear use case**
- **Why this enhancement is useful**
- **Possible implementation approach**

### Adding New Features

1. Check if feature is already planned in [roadmap](README.md#roadmap)
2. Open an issue to discuss the feature
3. Wait for maintainer approval
4. Fork and implement
5. Submit pull request

---

## Development Setup

### 1. Fork and Clone

```bash
# Fork the repo on GitHub, then:
git clone https://github.com/YOUR_USERNAME/gateway-ripper.git
cd gateway-ripper
```

### 2. Create Virtual Environment

```bash
python3 -m venv venv
source venv/bin/activate  # On Windows: venv\Scripts\activate
```

### 3. Install Dependencies

```bash
pip install -r requirements.txt
```

### 4. Create Feature Branch

```bash
git checkout -b feature/your-feature-name
```

---

## Adding New Gateways

Want to add support for a new payment gateway? Follow these steps:

### Step 1: Create Gateway Module

Create a new file in `modules/` directory:

```python
# modules/newgateway.py

from .base import BaseGateway

class NewGatewayGateway(BaseGateway):
    """NewGateway payment gateway handler"""
    
    def generate_code(self):
        """Generate Python code for NewGateway integration"""
        primary_key = self.get_primary_key()
        
        if not primary_key:
            return "# Error: No NewGateway API key found"
        
        code = f'''
"""
NewGateway Payment Gateway Integration
Auto-generated by Gateway-Ripper
"""

import requests
import json

class NewGatewayPaymentProcessor:
    """Process payments using NewGateway API"""
    
    def __init__(self):
        self.api_key = "{primary_key}"
        self.api_base = "https://api.newgateway.com/v1"
    
    # Add your methods here
'''
        
        return self.format_code(code)
    
    def get_test_cards(self):
        """Get NewGateway test card numbers"""
        return {
            "success": "4111111111111111",
            "declined": "4000000000000002"
        }
```

### Step 2: Add Gateway Fingerprints

Update `core/analyzer.py`:

```python
GATEWAY_FINGERPRINTS = {
    # ... existing gateways ...
    'newgateway': {
        'domains': ['newgateway.com', 'newgateway.js'],
        'keywords': ['NewGateway', 'newgateway.init', 'newgateway.createToken'],
        'key_pattern': r'ng_[a-zA-Z0-9]{32,}',
        'priority': 8
    }
}
```

### Step 3: Register Gateway

Update `modules/__init__.py`:

```python
from .newgateway import NewGatewayGateway

GATEWAY_MODULES = {
    # ... existing gateways ...
    'newgateway': NewGatewayGateway,
}
```

### Step 4: Test Your Gateway

Create a test HTML file:

```html
<!DOCTYPE html>
<html>
<head>
    <script src="https://js.newgateway.com/v1/"></script>
</head>
<body>
    <script>
        var ng = NewGateway('ng_test_abc123xyz789');
    </script>
</body>
</html>
```

Test it:

```bash
python ripper.py --url http://localhost:8000/test_newgateway.html
```

### Step 5: Update Documentation

Add your gateway to:
- `README.md` (Supported Gateways table)
- `EXAMPLES.md` (if needed)

---

## Coding Standards

### Python Style Guide

Follow PEP 8 with these specifics:

```python
# Good
def extract_api_keys(content):
    """Extract API keys from content"""
    keys = []
    pattern = r'api_key_[a-z0-9]+'
    matches = re.findall(pattern, content)
    return matches

# Bad
def extractAPIKeys(content):
    keys=[]
    pattern=r'api_key_[a-z0-9]+'
    matches=re.findall(pattern,content)
    return matches
```

### Naming Conventions

- **Functions/Methods**: `snake_case`
- **Classes**: `PascalCase`
- **Constants**: `UPPER_SNAKE_CASE`
- **Private methods**: `_leading_underscore`

### Documentation

All functions must have docstrings:

```python
def process_payment(card_number, amount):
    """
    Process a payment transaction
    
    Args:
        card_number (str): Card number to charge
        amount (float): Amount in dollars
        
    Returns:
        dict: Transaction result with status and message
        
    Raises:
        ValueError: If amount is negative
    """
    pass
```

### Imports

Organize imports in this order:

```python
# Standard library
import os
import sys
import re

# Third-party
import requests
from bs4 import BeautifulSoup

# Local
from utils import logger
from core import WebCrawler
```

---

## Testing

### Manual Testing

Before submitting PR, test:

1. **Basic functionality**
   ```bash
   python ripper.py --url https://example.com
   ```

2. **Error handling**
   ```bash
   python ripper.py --url https://invalid-url-12345.com
   ```

3. **Output file**
   ```bash
   python ripper.py --url https://example.com --output test.py
   python test.py
   ```

### Test Checklist

- [ ] Code runs without errors
- [ ] New features work as expected
- [ ] Existing features still work
- [ ] Error messages are clear
- [ ] Documentation is updated
- [ ] No sensitive data in code

---

## Pull Request Process

### Before Submitting

1. **Update your fork**
   ```bash
   git remote add upstream https://github.com/original/gateway-ripper.git
   git fetch upstream
   git merge upstream/main
   ```

2. **Test thoroughly**
   - Run all manual tests
   - Check for errors
   - Verify output

3. **Update documentation**
   - README.md if needed
   - EXAMPLES.md for new features
   - Code comments

4. **Clean commit history**
   ```bash
   git rebase -i HEAD~3  # Squash related commits
   ```

### Submitting PR

1. **Push to your fork**
   ```bash
   git push origin feature/your-feature-name
   ```

2. **Create Pull Request on GitHub**

3. **Fill PR template**
   ```markdown
   ## Description
   Brief description of changes
   
   ## Type of Change
   - [ ] Bug fix
   - [ ] New feature
   - [ ] Documentation update
   
   ## Testing
   - [ ] Tested manually
   - [ ] All existing features work
   
   ## Checklist
   - [ ] Code follows style guidelines
   - [ ] Documentation updated
   - [ ] No sensitive data included
   ```

4. **Respond to feedback**
   - Address reviewer comments
   - Make requested changes
   - Be patient and respectful

### After PR is Merged

1. **Delete your branch**
   ```bash
   git branch -d feature/your-feature-name
   git push origin --delete feature/your-feature-name
   ```

2. **Update your fork**
   ```bash
   git checkout main
   git pull upstream main
   ```

---

## Recognition

Contributors will be:
- Listed in CONTRIBUTORS.md
- Mentioned in release notes
- Credited in commit history

---

## Questions?

- Open an issue with "Question:" prefix
- Email: your.email@example.com
- Join our community discussions

---

Thank you for contributing to Gateway-Ripper! ðŸŽ‰
